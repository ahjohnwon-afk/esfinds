# é«˜å¾·åœ°å›¾é‡‡é›†è„šæœ¬å¿«é€Ÿå¼€å§‹æŒ‡å—

## ä¸€ã€è·å–APIå¯†é’¥

1. è®¿é—®é«˜å¾·å¼€æ”¾å¹³å°ï¼šhttps://lbs.amap.com/
2. æ³¨å†Œå¹¶ç™»å½•è´¦å·
3. è¿›å…¥æ§åˆ¶å° -> åº”ç”¨ç®¡ç† -> æˆ‘çš„åº”ç”¨
4. ç‚¹å‡»"åˆ›å»ºæ–°åº”ç”¨"
5. å¡«å†™åº”ç”¨åç§°ï¼ˆå¦‚ï¼šå•†å®¶ä¿¡æ¯é‡‡é›†ï¼‰
6. æ·»åŠ Keyï¼Œé€‰æ‹©æœåŠ¡å¹³å°ä¸º"WebæœåŠ¡"
7. å¤åˆ¶ç”Ÿæˆçš„Keyï¼ˆæ ¼å¼ç±»ä¼¼ï¼šabc123def456...ï¼‰

## äºŒã€å®‰è£…è„šæœ¬

```bash
# 1. ä¸‹è½½æˆ–å…‹éš†æœ¬ä»“åº“
git clone https://github.com/ahjohnwon-afk/esfinds.git
cd esfinds

# 2. å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

## ä¸‰ã€åŸºæœ¬ä½¿ç”¨

### 1. æœç´¢é¤å…

```bash
python amap_scraper.py --key ä½ çš„APIå¯†é’¥ --keyword é¤å… --city åŒ—äº¬ --max 50
```

### 2. æœç´¢å’–å•¡åº—

```bash
python amap_scraper.py --key ä½ çš„APIå¯†é’¥ --keyword å’–å•¡ --city ä¸Šæµ· --output shanghai_coffee.json
```

### 3. æœç´¢ç‰¹å®šç±»å‹ï¼ˆå¦‚ç«é”…åº—ï¼‰

```bash
python amap_scraper.py --key ä½ çš„APIå¯†é’¥ --keyword ç«é”… --city æˆéƒ½ --types 050100 --max 100
```

## å››ã€å¸¸ç”¨POIç±»å‹ä»£ç 

| ä»£ç  | ç±»å‹ |
|------|------|
| 050000 | é¤é¥®æœåŠ¡ |
| 060000 | è´­ç‰©æœåŠ¡ |
| 110000 | ä½å®¿æœåŠ¡ |
| 120000 | é£æ™¯åèƒœ |
| 080000 | ä½“è‚²ä¼‘é—² |

å®Œæ•´åˆ—è¡¨è¯·æŸ¥çœ‹ï¼šhttps://lbs.amap.com/api/webservice/guide/api/search

## äº”ã€è¾“å‡ºæ–‡ä»¶

é‡‡é›†çš„æ•°æ®ä¼šä¿å­˜ä¸ºJSONæ ¼å¼ï¼ŒåŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š

```json
{
  "name": "å•†å®¶åç§°",
  "address": "è¯¦ç»†åœ°å€",
  "tel": "è”ç³»ç”µè¯",
  "location": {
    "longitude": "ç»åº¦",
    "latitude": "çº¬åº¦"
  },
  "rating": "è¯„åˆ†",
  "type": "å•†å®¶ç±»å‹"
}
```

## å…­ã€æ³¨æ„äº‹é¡¹

1. **APIé™åˆ¶**ï¼šå…è´¹ç‰ˆæ¯æ—¥3000æ¬¡è°ƒç”¨
2. **è¯·æ±‚å»¶è¿Ÿ**ï¼šå»ºè®®è®¾ç½®0.5ç§’ä»¥ä¸Šï¼ˆä½¿ç”¨--delayå‚æ•°ï¼‰
3. **åŸå¸‚ä»£ç **ï¼šå¯ä»¥ä½¿ç”¨åŸå¸‚åç§°æˆ–åŸå¸‚ç¼–ç ï¼ˆå¦‚æ·±åœ³å¯ç”¨"æ·±åœ³"æˆ–"0755"ï¼‰

## ä¸ƒã€å¸¸è§é—®é¢˜

### é—®é¢˜1ï¼šæç¤º"INVALID_USER_KEY"

**è§£å†³**ï¼šæ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®ï¼Œç¡®è®¤å·²å¼€å¯"WebæœåŠ¡"æƒé™

### é—®é¢˜2ï¼šè¿”å›ç»“æœå¾ˆå°‘

**è§£å†³**ï¼š
- å°è¯•æ›´é€šç”¨çš„å…³é”®è¯ï¼ˆå¦‚"é¤å…"è€Œé"å·èœé¦†"ï¼‰
- æ£€æŸ¥åŸå¸‚åç§°æ˜¯å¦æ­£ç¡®
- å»æ‰typeså‚æ•°è¯•è¯•

### é—®é¢˜3ï¼šè¯·æ±‚å¤±è´¥

**è§£å†³**ï¼š
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- å¢å¤§--delayå‚æ•°å€¼
- æ£€æŸ¥APIé…é¢æ˜¯å¦ç”¨å®Œ

## å…«ã€è¿›é˜¶ä½¿ç”¨

### æ‰¹é‡é‡‡é›†å¤šä¸ªåŸå¸‚

åˆ›å»ºè„šæœ¬ `batch_collect.sh`ï¼š

```bash
#!/bin/bash
API_KEY="ä½ çš„APIå¯†é’¥"

cities=("åŒ—äº¬" "ä¸Šæµ·" "å¹¿å·" "æ·±åœ³" "æˆéƒ½")

for city in "${cities[@]}"
do
    echo "æ­£åœ¨é‡‡é›† $city çš„æ•°æ®..."
    python amap_scraper.py \
        --key "$API_KEY" \
        --keyword "é¤å…" \
        --city "$city" \
        --max 100 \
        --output "${city}_restaurants.json"
    sleep 2  # æ¯ä¸ªåŸå¸‚ä¹‹é—´æš‚åœ2ç§’
done

echo "æ‰€æœ‰åŸå¸‚é‡‡é›†å®Œæˆï¼"
```

### åœ¨Pythonä»£ç ä¸­ä½¿ç”¨

```python
from amap_scraper import AmapScraper

# åˆ›å»ºé‡‡é›†å™¨
scraper = AmapScraper(api_key='ä½ çš„APIå¯†é’¥')

# æœç´¢å•†å®¶
businesses = scraper.collect_businesses(
    keyword='å’–å•¡',
    city='åŒ—äº¬',
    max_results=50
)

# å¤„ç†æ•°æ®
for business in businesses:
    print(f"{business['name']} - {business['address']}")

# ä¿å­˜ç»“æœ
scraper.save_to_json(businesses, 'output.json')
```

## ä¹ã€è·å–å¸®åŠ©

æŸ¥çœ‹å®Œæ•´æ–‡æ¡£ï¼š
```bash
# å‘½ä»¤è¡Œå¸®åŠ©
python amap_scraper.py --help

# æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£
cat AMAP_SCRAPER_README.md
```

## åã€æŠ€æœ¯æ”¯æŒ

é‡åˆ°é—®é¢˜ï¼Ÿ
1. æŸ¥çœ‹ AMAP_SCRAPER_README.md è¯¦ç»†æ–‡æ¡£
2. è¿è¡Œæµ‹è¯•æ–‡ä»¶ï¼š`python test_amap_scraper.py`
3. æŸ¥çœ‹ç¤ºä¾‹è„šæœ¬ï¼š`example_usage.sh`
4. åœ¨GitHubä¸Šæäº¤Issue

ç¥ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰
